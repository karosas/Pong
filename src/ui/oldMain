package main;

import java.util.logging.Level;
import java.util.logging.Logger;

import org.newdawn.slick.AppGameContainer;
import org.newdawn.slick.BasicGame;
import org.newdawn.slick.GameContainer;
import org.newdawn.slick.Graphics;
import org.newdawn.slick.Input;
import org.newdawn.slick.SlickException;
import org.newdawn.slick.geom.Rectangle;
import org.newdawn.slick.geom.Shape;
import org.newdawn.slick.geom.Transform;

public class Main extends BasicGame
{
	Shape ball;
	float ballX = 100f;
	float ballY = 100f;
	float ballWidth = 20f;
	float ballHeight = 20f;
	float rotation = 270f;
	public Main(String gamename)
	{
		super(gamename);
	}

	@Override
	public void update(GameContainer gc, int delta) throws SlickException {
		Input input = gc.getInput();//container.getInput();
		if (input.isKeyDown(Input.KEY_UP)) {
			ballX += Math.cos(Math.toRadians(rotation)) * (0.2*delta);
			ballY += Math.sin(Math.toRadians(rotation)) * (0.2*delta);
		}
		if (input.isKeyDown(Input.KEY_DOWN)) {
			ballX -= Math.cos(Math.toRadians(rotation)) * (0.2*delta);
			ballY -= Math.sin(Math.toRadians(rotation)) * (0.2*delta);
		}
		if(input.isKeyDown(Input.KEY_LEFT)){
			rotation-=(0.1*delta);
			
			ball = ball.transform(Transform.createRotateTransform((float) Math.toRadians(rotation)/*, rectX, rectY*/));
			if(rotation <= 0f) {
				rotation = 360f;
			}
		}
		if(input.isKeyDown(Input.KEY_RIGHT)){
			rotation+=(0.1*delta);
			ball = ball.transform(Transform.createRotateTransform((float) Math.toRadians(rotation)/*, rectX, rectY*/));
			if(rotation >= 360f) {
				rotation = 0f;
			}
		}
		ball.setCenterX(ballX);
		ball.setCenterY(ballY);
	}

	@Override
	public void render(GameContainer gc, Graphics g) throws SlickException
	{
		//g.drawString("Howdy!", 100, 100);
		
		g.draw(ball);
	    
		//g.fillRect(rectX, rectY, rectWidth, rectHeight);
		
		g.drawString("X - " + Float.toString(ballX), 300, 300);
		g.drawString("Y - " + Float.toString(ballY), 300, 320);
		g.drawString("Angle - " + Float.toString(rotation), 300, 340);
		
	}

	public static void main(String[] args)
	{
		try
		{
			AppGameContainer appgc;
			appgc = new AppGameContainer(new Main("Simple Slick Game"));
			appgc.setDisplayMode(640, 480, false);
			appgc.start();
		}
		catch (SlickException ex)
		{
			Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
		}
	}
}